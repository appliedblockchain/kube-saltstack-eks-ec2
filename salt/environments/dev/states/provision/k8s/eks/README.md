# EKS Provision State

# Executing
Executing `EKS` state generates the corresponding *HCL* code and runs `terraform plan` into an `.tfstate`file in order to then manually execute `terraform apply`. Since this is a sensitivy operation we should always intervene when changing infrastructure with code.

To execute the state simply run

```
$ salt-call state.apply provision.k8s.eks.latest pillar='{"client_id":"applied_blockchain"}'
```

**Note:** Replace `client_id` with the appropriate value.

# Outputs
All the files generated by the state, terraform plans, cloud-init, binary terraform files, and so on are stored, by default (to change this change the `defaults.yaml`), in `/tmp/k8s-<client_id>`.

After executing the state you should go in this folder and proceed with the *terraform workflow*

```
bin/terraform init
bin/terraform plan
bin/terraform apply/destroy
```
# Clean Up

Don't forget to clean up the output folder after you're done. By default it sits at `/tmp/k8s`
